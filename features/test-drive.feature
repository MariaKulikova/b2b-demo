# language: ru
Функция: Запись на тест-драйв

  Как заинтересованный покупатель
  Я хочу записаться на тест-драйв автомобиля
  Чтобы проверить его перед покупкой

  Контекст:
    Дано что я нахожусь на странице детали автомобиля
    И автомобиль доступен для тест-драйва

  Сценарий: Открытие модального окна записи на тест-драйв
    Когда я нажимаю кнопку "Test Drive" или "Тест-драйв"
    Тогда открывается модальное окно записи на тест-драйв
    И я вижу форму с полями:
      | Поле                    |
      | Имя                     |
      | Телефон                 |
      | Email                   |
      | Предпочитаемая дата     |
      | Предпочитаемое время    |
      | Дополнительные пожелания |

  Сценарий: Заполнение формы тест-драйва
    Дано что модальное окно тест-драйва открыто
    Когда я заполняю обязательные поля:
      | Поле     | Значение           |
      | Имя      | Иван Петров        |
      | Телефон  | +31612345678       |
      | Email    | ivan@example.com   |
      | Дата     | 2025-01-15T14:00   |
    И нажимаю кнопку "Отправить заявку"
    Тогда форма отправляется успешно
    И я вижу сообщение о подтверждении записи
    И модальное окно закрывается

  Сценарий: Закрытие модального окна
    Дано что модальное окно тест-драйва открыто
    Когда я нажимаю клавишу "Escape"
    Тогда модальное окно закрывается
    И я возвращаюсь на страницу автомобиля

  Сценарий: Валидация обязательных полей
    Дано что модальное окно тест-драйва открыто
    Когда я пытаюсь отправить форму с пустыми обязательными полями
    Тогда я вижу сообщения об ошибках валидации
    И форма не отправляется
    И модальное окно остается открытым